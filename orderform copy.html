<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Keep this: we don't want this page in Google -->
  <meta name="robots" content="noindex">

  <title>Choir Score Order Form — Songs for Choirs</title>
  <meta name="description"
  content="Order licensed choir scores from Songs for Choirs. Each copy includes a unique watermark licence for your choir." />


  <!-- Social (optional, fine to keep) -->
  <meta property="og:title" content="Choir Score Order Form — Songs for Choirs">
  <meta property="og:description"
  content="Order licensed choir scores from Songs for Choirs. Each copy includes a unique watermark licence for your choir." />

  <meta property="og:image" content="https://www.songsforchoirs.com/images/og-default.jpg">
  <meta property="og:url" content="https://www.songsforchoirs.com/orderform.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Songs for Choirs">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Choir Score Order Form — Songs for Choirs">
  <meta name="twitter:description"
  content="Order licensed choir scores from Songs for Choirs. Each copy includes a unique watermark licence for your choir." />

  <meta name="twitter:image" content="https://www.songsforchoirs.com/images/og-default.jpg">
  <meta name="twitter:site" content="@songsforchoirs">

  <link rel="stylesheet" href="styles.css?v=999">




  <style>
  /* Order form layout refinement */
  body.order-page .panel {
    width: 90%;
    max-width: 720px;  /* narrower, matches choral.html proportions */
    margin: 2rem auto;
    padding: 2rem 2.5rem;
    display: block;
  }

  /* Restore natural text wrapping */
  body.order-page .panel, 
  body.order-page .panel * {
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
  }

  /* Make form elements full width but tidy */
  body.order-page input[type="text"],
  body.order-page input[type="email"],
  body.order-page input[type="number"] {
    width: 100%;
    box-sizing: border-box;
  }

  /* Soften spacing on notes */
  body.order-page p.note {
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 0.5rem 0 1rem;
  }
    
  /* Make order page text use full available width */
  body.order-page .panel p,
  body.order-page .panel label,
  body.order-page .panel h2 {
    max-width: none !important;
    display: block;
    width: 100%;
  }

  /* If .wrap or other layout container is restricting it */
  body.order-page .wrap,
  body.order-page main,
  body.order-page section {
    max-width: 100% !important;
  }
</style>



<!-- Privacy-friendly analytics by Plausible -->
<script defer data-domain="songsforchoirs.com" src="https://plausible.io/js/script.js"></script>


  
</head>
<body class="order-page">
  <!-- your order form content here -->

  <!-- Consistent header -->
  <header class="site-header">
    <div class="wrap">
      <h1 class="site-logo">songs<span class="gold">for</span>choirs</h1>
      <p class="tagline">Secure licensed downloads — trusted by choirs.</p>
    </div>
  </header>

  <!-- Main navigation -->
  <nav class="site-nav">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="choral.html">Choral</a></li>
      <li><a href="children.html">Children</a></li>
      <li><a href="other.html">Other</a></li>
      <li><a href="news.html">News</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>

  <!-- The order form starts here -->

  <!-- (Your form content goes here below this line) -->

  <!-- Form panel -->
<div class="panel">
  <h2>Place Your Order Here</h2>

  <form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="orderForm">
    <!-- PayPal variables -->
    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value="8LF2NJAGZW5EG">
    <input type="hidden" name="currency_code" value="GBP">
    <input type="hidden" name="item_name" id="paypalItemName" value="">
    <input type="hidden" name="amount" id="paypalAmount" value="">
    <input type="hidden" name="return" id="paypalReturn" value="https://www.songsforchoirs.com/receipt.html">
    <input type="hidden" name="cancel_return" value="https://www.songsforchoirs.com/orderform.html">
    
    <!-- Regular form fields -->
    <label for="title">Title of piece:</label>
    <input id="title" required placeholder="e.g. The Lord Is My Shepherd">
    
    <label for="choir">Organisation / Choir:</label>
    <input id="choir" class="choir-field" required>
    
    <label for="copy" class="inline-label">Number of copies:</label>
    <input id="copy" class="inline-input" required type="number" min="1" max="30">


    <p class="note">
  Please place large orders in batches of no more than 30 copies each.<br>
  This limit applies to keep transactions and downloads safe and reliable.
</p>

<label for="email">Where would you like your music to be delivered?</label>
<input id="email" type="email" name="email" placeholder="yourname@example.com" autocomplete="email" required>

<p class="note">
  We will send a confirmation button to this email address. — Click it to confirm your order.
</p>

<button type="submit" id="submitBtn" class="price">Send me my confirmation email.</button>


<p class="note">
  No payment will be taken until you confirm your email address.
</p>
</form>
</div>

<script>
function generateOrderNumber() {
  const today = new Date();
  const y = today.getFullYear().toString().slice(-2);
  const m = (today.getMonth() + 1).toString().padStart(2, "0");
  const d = today.getDate().toString().padStart(2, "0");
  const r = Math.floor(Math.random() * 900 + 100);
  return `SFC-${y}${m}${d}-${r}`;
}

document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("orderForm");
  const submitBtn = document.getElementById("submitBtn");

  // Autofill title from ?title= parameter
  const params = new URLSearchParams(window.location.search);
  const titleParam = params.get("title");
  const titleField = document.getElementById("title");
  if (titleParam && titleField) {
    titleField.value = decodeURIComponent(titleParam);
    titleField.readOnly = true;
  }

  // Handle PayPal submit
  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const title = document.getElementById("title").value.trim();
    const choir = document.getElementById("choir").value.trim();
    const copies = Math.min(30, Math.max(1, parseInt(document.getElementById("copy").value || "1", 10)));
    const pricePerCopy = 1.25;
    const total = (copies * pricePerCopy).toFixed(2);
    const orderNum = generateOrderNumber();
    const email = document.getElementById("email").value.trim();

    // Fill PayPal hidden inputs
    document.getElementById("paypalItemName").value = `${title} (${copies} copies)`;
    document.getElementById("paypalAmount").value = total;

    // Build return URL with details
    const baseReturn = "https://www.songsforchoirs.com/receipt.html";
    const returnParams = new URLSearchParams({
      title,
      choir,
      copies,
      amount: total,
      order: orderNum,
      email,
      currency: "GBP"
    });


    document.getElementById("paypalReturn").value = `${baseReturn}?${returnParams.toString()}`;

    // Disable button & show visual feedback
    submitBtn.disabled = true;
    submitBtn.textContent = "Processing your order… please wait";
    submitBtn.style.opacity = "0.8";
    submitBtn.style.cursor = "wait";

    // Try to submit; if PayPal fails, reset after 10s
    setTimeout(() => {
      submitBtn.disabled = false;
      submitBtn.textContent = "Submit Order & Continue to PayPal";
      submitBtn.style.opacity = "1";
      submitBtn.style.cursor = "pointer";
    }, 10000);

    // Now go to PayPal
    form.submit();
  });
});
</script>
</body>
</html>
